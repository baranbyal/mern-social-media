{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\baran\\\\Documents\\\\baris\\\\mern-social-media\\\\client\\\\src\\\\components\\\\FollowBtn.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { follow, unfollow } from \"../redux/actions/profileAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FollowBtn = _ref => {\n  _s();\n\n  let {\n    user\n  } = _ref;\n  const [followed, setFollowed] = useState(false);\n  const {\n    auth,\n    profile,\n    socket\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [load, setLoad] = useState(false);\n  useEffect(() => {\n    if (auth.user.following.find(item => item._id === user._id)) {\n      setFollowed(true);\n    }\n\n    return () => setFollowed(false);\n  }, [auth.user.following, user._id]);\n\n  const handleFollow = async () => {\n    if (load) return;\n    setFollowed(true);\n    setLoad(true);\n    await dispatch(follow({\n      users: profile.users,\n      user,\n      auth,\n      socket\n    }));\n    setLoad(false);\n  };\n\n  const handleUnFollow = async () => {\n    if (load) return;\n    setFollowed(false);\n    setLoad(true);\n    await dispatch(unfollow({\n      users: profile.users,\n      user,\n      auth,\n      socket\n    }));\n    setLoad(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: followed ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-1 hover-in-shadow outer-shadow\",\n      onClick: handleUnFollow,\n      children: \"Unfollow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-1 hover-in-shadow outer-shadow\",\n      onClick: handleFollow,\n      children: \"Follow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n};\n\n_s(FollowBtn, \"CFXLncUNzOcRIVlXOEbuUFOQ10I=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = FollowBtn;\nexport default FollowBtn;\n\nvar _c;\n\n$RefreshReg$(_c, \"FollowBtn\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","follow","unfollow","FollowBtn","user","followed","setFollowed","auth","profile","socket","state","dispatch","load","setLoad","following","find","item","_id","handleFollow","users","handleUnFollow"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/FollowBtn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { follow, unfollow } from \"../redux/actions/profileAction\";\r\n\r\nconst FollowBtn = ({user}) => {\r\n    const [ followed, setFollowed ] = useState(false);\r\n\r\n    const { auth, profile, socket } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (auth.user.following.find((item) => item._id === user._id)) {\r\n        setFollowed(true);\r\n      }\r\n      return () => setFollowed(false);\r\n    }, [auth.user.following, user._id]);\r\n\r\n    const handleFollow = async () => {\r\n        if(load) return;\r\n\r\n        setFollowed(true);\r\n        setLoad(true);\r\n        await dispatch(follow({ users: profile.users, user, auth, socket }));\r\n        setLoad(false);\r\n    };\r\n\r\n    const handleUnFollow = async () => {\r\n      if (load) return;\r\n\r\n      setFollowed(false);\r\n      setLoad(true);\r\n      await dispatch(unfollow({ users: profile.users, user, auth, socket }));\r\n      setLoad(false);\r\n    };\r\n\r\n\r\n    return (\r\n      <>\r\n        {followed ? (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleUnFollow}>\r\n            Unfollow\r\n          </button>\r\n        ) : (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleFollow}>\r\n            Follow\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n}\r\n\r\nexport default FollowBtn\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,gCAAjC;;;;AAEA,MAAMC,SAAS,GAAG,QAAY;EAAA;;EAAA,IAAX;IAACC;EAAD,CAAW;EAC1B,MAAM,CAAEC,QAAF,EAAYC,WAAZ,IAA4BT,QAAQ,CAAC,KAAD,CAA1C;EAEA,MAAM;IAAEU,IAAF;IAAQC,OAAR;IAAiBC;EAAjB,IAA4BT,WAAW,CAACU,KAAK,IAAIA,KAAV,CAA7C;EACA,MAAMC,QAAQ,GAAGZ,WAAW,EAA5B;EAEA,MAAM,CAACa,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,KAAD,CAAhC;EAEAC,SAAS,CAAC,MAAM;IACd,IAAIS,IAAI,CAACH,IAAL,CAAUU,SAAV,CAAoBC,IAApB,CAA0BC,IAAD,IAAUA,IAAI,CAACC,GAAL,KAAab,IAAI,CAACa,GAArD,CAAJ,EAA+D;MAC7DX,WAAW,CAAC,IAAD,CAAX;IACD;;IACD,OAAO,MAAMA,WAAW,CAAC,KAAD,CAAxB;EACD,CALQ,EAKN,CAACC,IAAI,CAACH,IAAL,CAAUU,SAAX,EAAsBV,IAAI,CAACa,GAA3B,CALM,CAAT;;EAOA,MAAMC,YAAY,GAAG,YAAY;IAC7B,IAAGN,IAAH,EAAS;IAETN,WAAW,CAAC,IAAD,CAAX;IACAO,OAAO,CAAC,IAAD,CAAP;IACA,MAAMF,QAAQ,CAACV,MAAM,CAAC;MAAEkB,KAAK,EAAEX,OAAO,CAACW,KAAjB;MAAwBf,IAAxB;MAA8BG,IAA9B;MAAoCE;IAApC,CAAD,CAAP,CAAd;IACAI,OAAO,CAAC,KAAD,CAAP;EACH,CAPD;;EASA,MAAMO,cAAc,GAAG,YAAY;IACjC,IAAIR,IAAJ,EAAU;IAEVN,WAAW,CAAC,KAAD,CAAX;IACAO,OAAO,CAAC,IAAD,CAAP;IACA,MAAMF,QAAQ,CAACT,QAAQ,CAAC;MAAEiB,KAAK,EAAEX,OAAO,CAACW,KAAjB;MAAwBf,IAAxB;MAA8BG,IAA9B;MAAoCE;IAApC,CAAD,CAAT,CAAd;IACAI,OAAO,CAAC,KAAD,CAAP;EACD,CAPD;;EAUA,oBACE;IAAA,UACGR,QAAQ,gBACP;MAAQ,SAAS,EAAC,oCAAlB;MAAuD,OAAO,EAAEe,cAAhE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADO,gBAKP;MAAQ,SAAS,EAAC,oCAAlB;MAAuD,OAAO,EAAEF,YAAhE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EANJ,iBADF;AAaH,CA/CD;;GAAMf,S;UAGgCH,W,EACjBD,W;;;KAJfI,S;AAiDN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}
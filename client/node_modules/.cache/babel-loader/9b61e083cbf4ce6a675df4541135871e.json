{"ast":null,"code":"import _objectSpread from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import Avatar from\"../../Avatar\";import{Link,useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import moment from\"moment\";import{BASE_URL}from'../../../utils/config';import{GLOBALTYPES}from\"../../../redux/actions/globalTypes\";import{deletePost,reportPost}from\"../../../redux/actions/postAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CardHeader=function CardHeader(_ref){var post=_ref.post;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;var dispatch=useDispatch();var history=useHistory();var handleEditPost=function handleEditPost(){dispatch({type:GLOBALTYPES.STATUS,payload:_objectSpread(_objectSpread({},post),{},{onEdit:true})});};var handleDeletePost=function handleDeletePost(){if(window.confirm(\"Are you sure?\")){dispatch(deletePost({post:post,auth:auth,socket:socket}));return history.push(\"/\");}};var handleReportPost=function handleReportPost(){dispatch(reportPost({post:post,auth:auth}));};var handleCopyLink=function handleCopyLink(){navigator.clipboard.writeText(\"\".concat(BASE_URL,\"/post/\").concat(post._id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"card_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"outer-shadow big-avatar-cover me-2\",children:/*#__PURE__*/_jsx(Avatar,{src:post.user.avatar,size:\"big-avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_name\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"m-0\",children:/*#__PURE__*/_jsx(Link,{className:\"text-dark\",to:\"/profile/\".concat(post.user._id),children:post.user.username})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:moment(post.createdAt).fromNow()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",id:\"moreLink\",\"data-bs-toggle\":\"dropdown\",children:\"more_horiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[auth.user._id===post.user._id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleEditPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-info\",children:\" create\"}),\"Edit Post\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleDeletePost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-red\",children:\" delete\"}),\"Delete Post\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleCopyLink,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-primary\",children:\"content_copy\"}),\"Copy Link\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleReportPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-yellow\",children:\"report_problem\"}),\"Report this post\"]})]})]})]});};export default CardHeader;","map":{"version":3,"names":["React","Avatar","Link","useHistory","useDispatch","useSelector","moment","BASE_URL","GLOBALTYPES","deletePost","reportPost","CardHeader","post","state","auth","socket","dispatch","history","handleEditPost","type","STATUS","payload","onEdit","handleDeletePost","window","confirm","push","handleReportPost","handleCopyLink","navigator","clipboard","writeText","_id","user","avatar","username","createdAt","fromNow"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/home/post_card/CardHeader.js"],"sourcesContent":["import React from \"react\";\r\nimport Avatar from \"../../Avatar\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { BASE_URL } from '../../../utils/config'\r\n\r\nimport { GLOBALTYPES } from \"../../../redux/actions/globalTypes\";\r\nimport { deletePost, reportPost } from \"../../../redux/actions/postAction\";\r\n\r\nconst CardHeader = ({ post }) => {\r\n  const { auth, socket } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleEditPost = () => {\r\n    dispatch({ type: GLOBALTYPES.STATUS, payload: { ...post, onEdit: true } });\r\n  };\r\n\r\n  const handleDeletePost = () => {\r\n    if(window.confirm(\"Are you sure?\")){\r\n      dispatch(deletePost({ post, auth, socket }));\r\n      return history.push(\"/\");\r\n    }\r\n    \r\n  };\r\n\r\n\r\n  const handleReportPost = () => {\r\n    dispatch(reportPost({post, auth}));\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(`${BASE_URL}/post/${post._id}`)\r\n  };\r\n\r\n  return (\r\n    <div className=\"card_header\">\r\n      <div className=\"d-flex\">\r\n        <div className=\"outer-shadow big-avatar-cover me-2\">\r\n          <Avatar src={post.user.avatar} size=\"big-avatar\" />\r\n        </div>\r\n        <div className=\"card_name\">\r\n          <h6 className=\"m-0\">\r\n            <Link className=\"text-dark\" to={`/profile/${post.user._id}`}>\r\n              {post.user.username}\r\n            </Link>\r\n          </h6>\r\n          <small className=\"text-muted\">\r\n            {moment(post.createdAt).fromNow()}\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"nav-item dropdown\">\r\n        <span\r\n          className=\"material-icons\"\r\n          id=\"moreLink\"\r\n          data-bs-toggle=\"dropdown\"\r\n        >\r\n          more_horiz\r\n        </span>\r\n\r\n        <div className=\"dropdown-menu\">\r\n          {auth.user._id === post.user._id && (\r\n            <>\r\n              <div className=\"dropdown-item\" onClick={handleEditPost}>\r\n                <span className=\"material-icons text-info\"> create</span>Edit\r\n                Post\r\n              </div>\r\n              <div className=\"dropdown-item\" onClick={handleDeletePost}>\r\n                <span className=\"material-icons text-red\"> delete</span>Delete\r\n                Post\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"dropdown-item\" onClick={handleCopyLink}>\r\n            <span className=\"material-icons text-primary\">content_copy</span>\r\n            Copy Link\r\n          </div>\r\n          <div className=\"dropdown-item\" onClick={handleReportPost}>\r\n            <span className=\"material-icons text-yellow\">report_problem</span>\r\n            Report this post\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardHeader;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
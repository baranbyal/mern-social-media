{"ast":null,"code":"import { GLOBALTYPES } from './globalTypes';\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData';\nexport const NOTIFY_TYPES = {\n  GET_NOTIFIES: \"GET_NOTIFIES\",\n  CREATE_NOTIFY: \"CREATE_NOTIFY\",\n  REMOVE_NOTIFY: \"REMOVE_NOTIFY\",\n  UPDATE_NOTIFY: \"UPDATE_NOTIFY\",\n  UPDATE_SOUND: \"UPDATE_SOUND\",\n  DELETE_ALL_NOTIFICATIONS: \"DELETE_ALL_NOTIFICATIONS\"\n};\nexport const createNotify = _ref => {\n  let {\n    msg,\n    auth,\n    socket\n  } = _ref;\n  return async dispatch => {\n    try {\n      const res = await postDataAPI(`notify`, msg, auth.token);\n      socket.emit('createNotify', { ...res.data.notify,\n        user: {\n          username: auth.user.username,\n          avatar: auth.user.avatar\n        }\n      });\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg\n        }\n      });\n    }\n  };\n};\nexport const removeNotify = _ref2 => {\n  let {\n    msg,\n    auth,\n    socket\n  } = _ref2;\n  return async dispatch => {\n    try {\n      await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token);\n      socket.emit(\"removeNotify\", msg);\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg\n        }\n      });\n    }\n  };\n};\nexport const getNotifies = token => async dispatch => {\n  try {\n    const res = await getDataAPI('notifies', token);\n    dispatch({\n      type: NOTIFY_TYPES.GET_NOTIFIES,\n      payload: res.data.notifies\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const isReadNotify = _ref3 => {\n  let {\n    msg,\n    auth\n  } = _ref3;\n  return async dispatch => {\n    dispatch({\n      type: NOTIFY_TYPES.UPDATE_NOTIFY,\n      payload: { ...msg,\n        isRead: true\n      }\n    });\n\n    try {\n      await patchDataAPI(`isReadNotify/${msg._id}`, null, auth.token);\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg\n        }\n      });\n    }\n  };\n};\nexport const deleteAllNotifies = token => async dispatch => {\n  dispatch({\n    type: NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS,\n    payload: []\n  });\n\n  try {\n    await deleteDataAPI(`deleteAllNotify`, token);\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};","map":{"version":3,"names":["GLOBALTYPES","postDataAPI","deleteDataAPI","getDataAPI","patchDataAPI","NOTIFY_TYPES","GET_NOTIFIES","CREATE_NOTIFY","REMOVE_NOTIFY","UPDATE_NOTIFY","UPDATE_SOUND","DELETE_ALL_NOTIFICATIONS","createNotify","msg","auth","socket","dispatch","res","token","emit","data","notify","user","username","avatar","err","type","ALERT","payload","error","response","removeNotify","id","url","getNotifies","notifies","isReadNotify","isRead","_id","deleteAllNotifies"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/redux/actions/notifyAction.js"],"sourcesContent":["import { GLOBALTYPES } from './globalTypes';\r\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData';\r\n\r\nexport const NOTIFY_TYPES = {\r\n  GET_NOTIFIES: \"GET_NOTIFIES\",\r\n  CREATE_NOTIFY: \"CREATE_NOTIFY\",\r\n  REMOVE_NOTIFY: \"REMOVE_NOTIFY\",\r\n  UPDATE_NOTIFY: \"UPDATE_NOTIFY\",\r\n  UPDATE_SOUND: \"UPDATE_SOUND\",\r\n  DELETE_ALL_NOTIFICATIONS: \"DELETE_ALL_NOTIFICATIONS\",\r\n};\r\n\r\nexport const createNotify = ({msg, auth, socket }) => async (dispatch) => {\r\n\r\n    try {\r\n        const res = await postDataAPI(`notify`, msg, auth.token);\r\n        socket.emit('createNotify', {\r\n          ...res.data.notify,\r\n          user: {\r\n            username: auth.user.username,\r\n            avatar: auth.user.avatar,\r\n          }\r\n        });\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n};\r\n\r\nexport const removeNotify = ({ msg, auth, socket }) => async (dispatch) => {\r\n  try {\r\n    await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token);\r\n    socket.emit(\"removeNotify\", msg);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getNotifies = (token) => async (dispatch) => {\r\n  try {\r\n    const res = await getDataAPI('notifies', token);\r\n    \r\n    dispatch({type: NOTIFY_TYPES.GET_NOTIFIES, payload: res.data.notifies});\r\n    \r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const isReadNotify = ({msg, auth}) => async (dispatch) => {\r\n\r\n  dispatch({type: NOTIFY_TYPES.UPDATE_NOTIFY, payload: {...msg, isRead: true} });\r\n\r\n  try {\r\n    await patchDataAPI(`isReadNotify/${msg._id}`,null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteAllNotifies = (token) => async (dispatch) => {\r\n  dispatch({ type: NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS, payload: [] });\r\n\r\n  try {\r\n    await deleteDataAPI(`deleteAllNotify`, token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
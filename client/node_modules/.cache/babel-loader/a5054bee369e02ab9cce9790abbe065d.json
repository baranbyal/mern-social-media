{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import PostCard from\"../PostCard\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{POST_TYPES}from\"../../redux/actions/postAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(){var _useSelector=useSelector(function(state){return state;}),homePosts=_useSelector.homePosts,auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var handleLoadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"posts?limit=\".concat(homePosts.page*9),auth.token);case 3:res=_context.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:homePosts.page+1})});setLoad(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[homePosts.posts.map(function(post){return/*#__PURE__*/_jsx(PostCard,{post:post,theme:theme},post._id);}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:homePosts.result,page:homePosts.page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","PostCard","LoadIcon","LoadMoreBtn","getDataAPI","POST_TYPES","Posts","state","homePosts","auth","theme","dispatch","load","setLoad","handleLoadMore","page","token","res","type","GET_POSTS","payload","data","posts","map","post","_id","result"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/home/Posts.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport PostCard from \"../PostCard\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\nimport LoadMoreBtn from \"../LoadMoreBtn\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { POST_TYPES } from \"../../redux/actions/postAction\";\r\n\r\nconst Posts = () => {\r\n  const { homePosts, auth, theme } = useSelector((state) => state);\r\n  const dispatch =  useDispatch();\r\n\r\n  const [load, setLoad] = useState(false);\r\n\r\n  const handleLoadMore = async () => {\r\n    setLoad(true);\r\n    const res = await getDataAPI(`posts?limit=${homePosts.page * 9}`, auth.token);\r\n    dispatch({ type: POST_TYPES.GET_POSTS, payload: {...res.data, page: homePosts.page + 1 } });\r\n    setLoad(false);\r\n  };\r\n  return (\r\n    <div className=\"posts\">\r\n      {homePosts.posts.map((post) => (\r\n        <PostCard key={post._id} post={post} theme={theme} />\r\n      ))}\r\n\r\n      {load && (\r\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\r\n      )}\r\n\r\n      <LoadMoreBtn\r\n        result={homePosts.result}\r\n        page={homePosts.page}\r\n        load={load}\r\n        handleLoadMore={handleLoadMore}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n"],"mappings":"mkBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,SAAP,KAAqB,aAArB,CACA,MAAOC,SAAP,KAAqB,0BAArB,CACA,MAAOC,YAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,UAAT,KAA2B,gCAA3B,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB,iBAAmCP,WAAW,CAAC,SAACQ,KAAD,QAAWA,MAAX,EAAD,CAA9C,CAAQC,SAAR,cAAQA,SAAR,CAAmBC,IAAnB,cAAmBA,IAAnB,CAAyBC,KAAzB,cAAyBA,KAAzB,CACA,GAAMC,SAAQ,CAAIX,WAAW,EAA7B,CAEA,cAAwBF,QAAQ,CAAC,KAAD,CAAhC,wCAAOc,IAAP,eAAaC,OAAb,eAEA,GAAMC,eAAc,4FAAG,6IACrBD,OAAO,CAAC,IAAD,CAAP,CADqB,sBAEHT,WAAU,uBAAgBI,SAAS,CAACO,IAAV,CAAiB,CAAjC,EAAsCN,IAAI,CAACO,KAA3C,CAFP,QAEfC,GAFe,eAGrBN,QAAQ,CAAC,CAAEO,IAAI,CAAEb,UAAU,CAACc,SAAnB,CAA8BC,OAAO,gCAAMH,GAAG,CAACI,IAAV,MAAgBN,IAAI,CAAEP,SAAS,CAACO,IAAV,CAAiB,CAAvC,EAArC,CAAD,CAAR,CACAF,OAAO,CAAC,KAAD,CAAP,CAJqB,sDAAH,kBAAdC,eAAc,0CAApB,CAMA,mBACE,aAAK,SAAS,CAAC,OAAf,WACGN,SAAS,CAACc,KAAV,CAAgBC,GAAhB,CAAoB,SAACC,IAAD,qBACnB,KAAC,QAAD,EAAyB,IAAI,CAAEA,IAA/B,CAAqC,KAAK,CAAEd,KAA5C,EAAec,IAAI,CAACC,GAApB,CADmB,EAApB,CADH,CAKGb,IAAI,eACH,YAAK,GAAG,CAAEV,QAAV,CAAoB,GAAG,CAAC,YAAxB,CAAqC,SAAS,CAAC,iBAA/C,EANJ,cASE,KAAC,WAAD,EACE,MAAM,CAAEM,SAAS,CAACkB,MADpB,CAEE,IAAI,CAAElB,SAAS,CAACO,IAFlB,CAGE,IAAI,CAAEH,IAHR,CAIE,cAAc,CAAEE,cAJlB,EATF,GADF,CAkBD,CA9BD,CAgCA,cAAeR,MAAf"},"metadata":{},"sourceType":"module"}
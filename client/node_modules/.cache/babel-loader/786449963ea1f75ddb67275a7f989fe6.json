{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Avatar from\"./Avatar\";import moment from'moment';import{deleteAllNotifies,isReadNotify,NOTIFY_TYPES}from'../redux/actions/notifyAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotifyModal=function NotifyModal(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,notify=_useSelector.notify;var dispatch=useDispatch();var handleIsRead=function handleIsRead(msg){dispatch(isReadNotify({msg:msg,auth:auth}));};var handleDeleteAll=function handleDeleteAll(){var newArr=notify.data.filter(function(item){return item.isRead===false;});if(newArr.length===0)return dispatch(deleteAllNotifies(auth.token));if(window.confirm(\"You have \".concat(newArr.length,\" unread notifications.Do you want to delete all notifications?\"))){return dispatch(deleteAllNotifies(auth.token));}};var handleSound=function handleSound(){dispatch({type:NOTIFY_TYPES.UPDATE_SOUND,payload:!notify.sound});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",style:{minWidth:\"280px\",boxShadow:\"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",background:\"white\",borderRadius:\"10px\",borderTopRightRadius:\"0\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notifications\"}),notify.sound?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell-slash text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-1\"}),notify.data.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-muted w-100 text-center\",children:\"No Notifications\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"calc(100vh - 200px)\",overflow:\"auto\"},children:notify.data.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 mb-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"\".concat(msg.url),style:{textDecoration:\"none\"},className:\"d-flex text-dark align-items-center\",onClick:function onClick(){return handleIsRead(msg);},children:[/*#__PURE__*/_jsx(Avatar,{src:msg.user.avatar,size:\"big-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-fill mx-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"mr-1\",children:msg.user.username}),/*#__PURE__*/_jsx(\"span\",{children:msg.text})]}),msg.content&&/*#__PURE__*/_jsxs(\"small\",{children:[msg.content.slice(0,20),\"...\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"30px\"},children:msg.image&&/*#__PURE__*/_jsx(Avatar,{src:msg.image,size:\"medium-avatar\"})})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-flex justify-content-between px-2\",children:[moment(msg.createdAt).fromNow(),!msg.isRead&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle color-c1\"})]})]},index);})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end my-auto me-2 color-c1\",style:{cursor:\"pointer\"},onClick:handleDeleteAll,children:\"Delete\"})]});};export default NotifyModal;","map":{"version":3,"names":["React","useDispatch","useSelector","Link","Avatar","moment","deleteAllNotifies","isReadNotify","NOTIFY_TYPES","NotifyModal","state","auth","notify","dispatch","handleIsRead","msg","handleDeleteAll","newArr","data","filter","item","isRead","length","token","window","confirm","handleSound","type","UPDATE_SOUND","payload","sound","minWidth","boxShadow","background","borderRadius","borderTopRightRadius","fontSize","cursor","maxHeight","overflow","map","index","url","textDecoration","user","avatar","username","text","content","slice","width","image","createdAt","fromNow"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/NotifyModal.js"],"sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"./Avatar\";\r\nimport moment from 'moment';\r\nimport { deleteAllNotifies, isReadNotify, NOTIFY_TYPES } from '../redux/actions/notifyAction';\r\n\r\nconst NotifyModal = () => {\r\n    const { auth, notify } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleIsRead = (msg) => {\r\n      dispatch(isReadNotify({msg, auth}));\r\n    };\r\n\r\n    const handleDeleteAll = () => {\r\n      const newArr = notify.data.filter(item => item.isRead === false)\r\n      if(newArr.length === 0) return dispatch(deleteAllNotifies(auth.token))\r\n\r\n      if(window.confirm(`You have ${newArr.length} unread notifications.Do you want to delete all notifications?`)){\r\n        return dispatch(deleteAllNotifies(auth.token))\r\n      }\r\n    };\r\n\r\n    const handleSound = () => {\r\n      dispatch({type: NOTIFY_TYPES.UPDATE_SOUND, payload: !notify.sound });\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className=\"mt-1\"\r\n        style={{\r\n          minWidth: \"280px\",\r\n          boxShadow: \"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",\r\n          background: \"white\",\r\n          borderRadius: \"10px\",\r\n          borderTopRightRadius: \"0\",\r\n        }}\r\n      >\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h3>Notifications</h3>\r\n          {notify.sound ? (\r\n            <i\r\n              className=\"fas fa-bell text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          ) : (\r\n            <i\r\n              className=\"fas fa-bell-slash text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          )}\r\n        </div>\r\n        <hr className=\"mt-1\" />\r\n        {notify.data.length === 0 && (\r\n          <span className=\"text-muted w-100 text-center\">No Notifications</span>\r\n        )}\r\n        <div style={{ maxHeight: \"calc(100vh - 200px)\", overflow: \"auto\" }}>\r\n          {notify.data.map((msg, index) => (\r\n            <div className=\"px-2 mb-3\" key={index}>\r\n              <Link\r\n                to={`${msg.url}`}\r\n                style={{ textDecoration: \"none\" }}\r\n                className=\"d-flex text-dark align-items-center\"\r\n                onClick={() => handleIsRead(msg)}\r\n              >\r\n                <Avatar src={msg.user.avatar} size=\"big-avatar\" />\r\n\r\n                <div className=\"flex-fill mx-1\">\r\n                  <div>\r\n                    <strong className=\"mr-1\">{msg.user.username}</strong>\r\n                    <span>{msg.text}</span>\r\n                  </div>\r\n                  {msg.content && <small>{msg.content.slice(0, 20)}...</small>}\r\n                </div>\r\n                <div style={{ width: \"30px\" }}>\r\n                  {msg.image && <Avatar src={msg.image} size=\"medium-avatar\" />}\r\n                </div>\r\n              </Link>\r\n              <small className=\"text-muted d-flex justify-content-between px-2\">\r\n                {moment(msg.createdAt).fromNow()}\r\n                {!msg.isRead && <i className=\"fas fa-circle color-c1\" />}\r\n              </small>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <hr className=\"my-1\" />\r\n        <div\r\n          className=\"text-end my-auto me-2 color-c1\"\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={handleDeleteAll}\r\n        >\r\n          Delete\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default NotifyModal\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
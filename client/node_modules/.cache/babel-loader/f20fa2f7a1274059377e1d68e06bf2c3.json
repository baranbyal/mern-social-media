{"ast":null,"code":"import _defineProperty from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";import{updateProfileUser}from\"../../redux/actions/profileAction\";import{checkImage}from\"../../utils/imageUpload\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(_ref){var setOnEdit=_ref.setOnEdit;var initialState={fullname:\"\",mobile:\"\",address:\"\",website:\"\",story:\"\",gender:\"\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var fullname=userData.fullname,mobile=userData.mobile,address=userData.address,website=userData.website,story=userData.story,gender=userData.gender;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],SetAvatar=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();useEffect(function(){setUserData(auth.user);},[auth.user]);var changeAvatar=function changeAvatar(e){var file=e.target.files[0];var err=checkImage(file);if(err){return dispatch({type:GLOBALTYPES.ALERT,payload:{error:err}});}SetAvatar(file);};var handleInput=function handleInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(updateProfileUser({userData:userData,avatar:avatar,auth:auth}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"edit_profile\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn_close\",onClick:function onClick(){return setOnEdit(false);},children:\"Close\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info_avatar\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"profile\",src:avatar?URL.createObjectURL(avatar):auth.user.avatar,style:{filter:theme?\"invert(1)\":\"invert(0)\"}}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-camera\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Change\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",id:\"file_up\",accept:\"image/*\",onChange:changeAvatar})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullname\",children:\"Full Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"fullname\",name:\"fullname\",value:fullname,onChange:handleInput}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger position-absolute\",style:{top:\"50%\",right:\"5px\",transform:\"translateY(-50%)\"},children:[fullname.length,\"/25\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mobile\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"mobile\",name:\"mobile\",value:mobile,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"address\",name:\"address\",value:address,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"website\",children:\"Website\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"website\",name:\"website\",value:website,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"story\",children:\"Story\"}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"4\",type:\"text\",className:\"form-control\",id:\"story\",name:\"story\",value:story,onChange:handleInput}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger d-block text-right\",children:[story.length,\"/200\"]})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gender\",children:\"Gender\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend px-0 mb-4\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"custom-select text-capitalize\",name:\"gender\",id:\"gender\",onChange:handleInput,value:gender,children:[/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info w-100\",type:\"submit\",children:\"Save\"})]})]});};export default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","GLOBALTYPES","updateProfileUser","checkImage","EditProfile","setOnEdit","initialState","fullname","mobile","address","website","story","gender","userData","setUserData","avatar","SetAvatar","state","auth","theme","dispatch","user","changeAvatar","e","file","target","files","err","type","ALERT","payload","error","handleInput","name","value","handleSubmit","preventDefault","URL","createObjectURL","filter","top","right","transform","length"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/profile/EditProfile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\nimport { updateProfileUser } from \"../../redux/actions/profileAction\";\r\n\r\nimport { checkImage } from \"../../utils/imageUpload\";\r\n\r\nconst EditProfile = ({ setOnEdit }) => {\r\n  const initialState = {\r\n    fullname: \"\",\r\n    mobile: \"\",\r\n    address: \"\",\r\n    website: \"\",\r\n    story: \"\",\r\n    gender: \"\",\r\n  };\r\n  const [userData, setUserData] = useState(initialState);\r\n  const { fullname, mobile, address, website, story, gender } = userData;\r\n  const [avatar, SetAvatar] = useState(\"\");\r\n  const { auth, theme } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setUserData(auth.user);\r\n  }, [auth.user]);\r\n\r\n  const changeAvatar = (e) => {\r\n    const file = e.target.files[0];\r\n    const err = checkImage(file);\r\n    if (err) {\r\n      return dispatch({ type: GLOBALTYPES.ALERT, payload: { error: err } });\r\n    }\r\n    SetAvatar(file);\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData({ ...userData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n      e.preventDefault();\r\n      dispatch(updateProfileUser( {userData, avatar, auth} ) );\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit_profile\">\r\n      <button\r\n        className=\"btn btn-danger btn_close\"\r\n        onClick={() => setOnEdit(false)}\r\n      >\r\n        Close\r\n      </button>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"info_avatar\">\r\n          <img\r\n            alt=\"profile\"\r\n            src={avatar ? URL.createObjectURL(avatar) : auth.user.avatar}\r\n            style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\r\n          />\r\n          <span>\r\n            <i className=\"fas fa-camera\" />\r\n            <p>Change</p>\r\n            <input\r\n              type=\"file\"\r\n              name=\"file\"\r\n              id=\"file_up\"\r\n              accept=\"image/*\"\r\n              onChange={changeAvatar}\r\n            />\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"form_group\">\r\n          <label htmlFor=\"fullname\">Full Name</label>\r\n          <div className=\"position-relative\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"fullname\"\r\n              name=\"fullname\"\r\n              value={fullname}\r\n              onChange={handleInput}\r\n            />\r\n            <small\r\n              className=\"text-danger position-absolute\"\r\n              style={{\r\n                top: \"50%\",\r\n                right: \"5px\",\r\n                transform: \"translateY(-50%)\",\r\n              }}\r\n            >\r\n              {fullname.length}/25\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form_group\">\r\n          <label htmlFor=\"mobile\">Mobile</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"mobile\"\r\n            name=\"mobile\"\r\n            value={mobile}\r\n            onChange={handleInput}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form_group\">\r\n          <label htmlFor=\"address\">Address</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"address\"\r\n            name=\"address\"\r\n            value={address}\r\n            onChange={handleInput}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form_group\">\r\n          <label htmlFor=\"website\">Website</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"website\"\r\n            name=\"website\"\r\n            value={website}\r\n            onChange={handleInput}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form_group\">\r\n          <label htmlFor=\"story\">Story</label>\r\n\r\n          <textarea\r\n            cols=\"30\"\r\n            rows=\"4\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"story\"\r\n            name=\"story\"\r\n            value={story}\r\n            onChange={handleInput}\r\n          />\r\n\r\n          <small className=\"text-danger d-block text-right\">\r\n            {story.length}/200\r\n          </small>\r\n        </div>\r\n\r\n        <label htmlFor=\"gender\">Gender</label>\r\n        <div className=\"input-group-prepend px-0 mb-4\">\r\n          <select\r\n            className=\"custom-select text-capitalize\"\r\n            name=\"gender\"\r\n            id=\"gender\"\r\n            onChange={handleInput}\r\n            value={gender}\r\n          >\r\n            <option value=\"male\">Male</option>\r\n            <option value=\"female\">Female</option>\r\n          </select>\r\n        </div>\r\n        <button className=\"btn btn-info w-100\" type=\"submit\">\r\n          Save\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{GLOBALTYPES}from'./globalTypes';import{postDataAPI,deleteDataAPI,getDataAPI,patchDataAPI}from'../../utils/fetchData';export var NOTIFY_TYPES={GET_NOTIFIES:\"GET_NOTIFIES\",CREATE_NOTIFY:\"CREATE_NOTIFY\",REMOVE_NOTIFY:\"REMOVE_NOTIFY\",UPDATE_NOTIFY:\"UPDATE_NOTIFY\",UPDATE_SOUND:\"UPDATE_SOUND\",DELETE_ALL_NOTIFICATIONS:\"DELETE_ALL_NOTIFICATIONS\"};export var createNotify=function createNotify(_ref){var msg=_ref.msg,auth=_ref.auth,socket=_ref.socket;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postDataAPI(\"notify\",msg,auth.token);case 3:res=_context.sent;socket.emit('createNotify',_objectSpread(_objectSpread({},res.data.notify),{},{user:{username:auth.user.username,avatar:auth.user.avatar}}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var removeNotify=function removeNotify(_ref3){var msg=_ref3.msg,auth=_ref3.auth,socket=_ref3.socket;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return deleteDataAPI(\"notify/\".concat(msg.id,\"?url=\").concat(msg.url),auth.token);case 3:socket.emit(\"removeNotify\",msg);_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};export var getNotifies=function getNotifies(token){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getDataAPI('notifies',token);case 3:res=_context3.sent;dispatch({type:NOTIFY_TYPES.GET_NOTIFIES,payload:res.data.notifies});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var isReadNotify=function isReadNotify(_ref6){var msg=_ref6.msg,auth=_ref6.auth;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:NOTIFY_TYPES.UPDATE_NOTIFY,payload:_objectSpread(_objectSpread({},msg),{},{isRead:true})});_context4.prev=1;_context4.next=4;return patchDataAPI(\"isReadNotify/\".concat(msg._id),null,auth.token);case 4:_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[1,6]]);}));return function(_x4){return _ref7.apply(this,arguments);};}();};export var deleteAllNotifies=function deleteAllNotifies(token){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS,payload:[]});_context5.prev=1;_context5.next=4;return deleteDataAPI(\"deleteAllNotify\",token);case 4:_context5.next=9;break;case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context5.t0.response.data.msg}});case 9:case\"end\":return _context5.stop();}}},_callee5,null,[[1,6]]);}));return function(_x5){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"names":["GLOBALTYPES","postDataAPI","deleteDataAPI","getDataAPI","patchDataAPI","NOTIFY_TYPES","GET_NOTIFIES","CREATE_NOTIFY","REMOVE_NOTIFY","UPDATE_NOTIFY","UPDATE_SOUND","DELETE_ALL_NOTIFICATIONS","createNotify","msg","auth","socket","dispatch","token","res","emit","data","notify","user","username","avatar","type","ALERT","payload","error","response","removeNotify","id","url","getNotifies","notifies","isReadNotify","isRead","_id","deleteAllNotifies"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/redux/actions/notifyAction.js"],"sourcesContent":["import { GLOBALTYPES } from './globalTypes';\r\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData';\r\n\r\nexport const NOTIFY_TYPES = {\r\n  GET_NOTIFIES: \"GET_NOTIFIES\",\r\n  CREATE_NOTIFY: \"CREATE_NOTIFY\",\r\n  REMOVE_NOTIFY: \"REMOVE_NOTIFY\",\r\n  UPDATE_NOTIFY: \"UPDATE_NOTIFY\",\r\n  UPDATE_SOUND: \"UPDATE_SOUND\",\r\n  DELETE_ALL_NOTIFICATIONS: \"DELETE_ALL_NOTIFICATIONS\",\r\n};\r\n\r\nexport const createNotify = ({msg, auth, socket }) => async (dispatch) => {\r\n\r\n    try {\r\n        const res = await postDataAPI(`notify`, msg, auth.token);\r\n        socket.emit('createNotify', {\r\n          ...res.data.notify,\r\n          user: {\r\n            username: auth.user.username,\r\n            avatar: auth.user.avatar,\r\n          }\r\n        });\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n};\r\n\r\nexport const removeNotify = ({ msg, auth, socket }) => async (dispatch) => {\r\n  try {\r\n    await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token);\r\n    socket.emit(\"removeNotify\", msg);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getNotifies = (token) => async (dispatch) => {\r\n  try {\r\n    const res = await getDataAPI('notifies', token);\r\n    \r\n    dispatch({type: NOTIFY_TYPES.GET_NOTIFIES, payload: res.data.notifies});\r\n    \r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const isReadNotify = ({msg, auth}) => async (dispatch) => {\r\n\r\n  dispatch({type: NOTIFY_TYPES.UPDATE_NOTIFY, payload: {...msg, isRead: true} });\r\n\r\n  try {\r\n    await patchDataAPI(`isReadNotify/${msg._id}`,null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteAllNotifies = (token) => async (dispatch) => {\r\n  dispatch({ type: NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS, payload: [] });\r\n\r\n  try {\r\n    await deleteDataAPI(`deleteAllNotify`, token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
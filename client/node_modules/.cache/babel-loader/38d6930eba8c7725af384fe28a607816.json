{"ast":null,"code":"import{BrowserRouter as Router,Route}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import io from'socket.io-client';import PageRender from\"./customRouter/PageRender\";import PrivateRouter from\"./customRouter/PrivateRouter\";import Login from\"./pages/login\";import Register from\"./pages/register\";import Home from\"./pages/home\";import Alert from\"./components/alert/Alert\";import Header from\"./components/header/Header\";import StatusModal from\"./components/StatusModal\";import{refreshToken}from\"./redux/actions/authAction\";import{getPosts}from\"./redux/actions/postAction\";import{getSuggestions}from\"./redux/actions/suggestionsAction\";import{getNotifies}from\"./redux/actions/notifyAction\";import AdminDashboard from\"./pages/adminDashboard\";import{GLOBALTYPES}from\"./redux/actions/globalTypes\";import SocketClient from\"./SocketClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,status=_useSelector.status,modal=_useSelector.modal,userType=_useSelector.userType;var dispatch=useDispatch();useEffect(function(){dispatch(refreshToken());var socket=io();dispatch({type:GLOBALTYPES.SOCKET,payload:socket});return function(){return socket.close();};},[dispatch]);useEffect(function(){if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestions(auth.token));dispatch(getNotifies(auth.token));}},[dispatch,auth.token]);useEffect(function(){if(!(\"Notification\"in window)){alert(\"This browser does not support desktop notification\");}else if(Notification.permission===\"granted\"){}else if(Notification.permission!==\"denied\"){Notification.requestPermission().then(function(permission){if(permission===\"granted\"){}});}},[]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"theme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"App \".concat((status||modal)&&\"mode\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[userType===\"user\"&&auth.token&&/*#__PURE__*/_jsx(Header,{}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:userType===\"user\"?auth.token?Home:Login:auth.token?AdminDashboard:Login}),userType===\"user\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap_page\",children:[/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page\",component:PageRender}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page/:id\",component:PageRender})]})]})]})})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","useDispatch","useSelector","useEffect","io","PageRender","PrivateRouter","Login","Register","Home","Alert","Header","StatusModal","refreshToken","getPosts","getSuggestions","getNotifies","AdminDashboard","GLOBALTYPES","SocketClient","App","state","auth","status","modal","userType","dispatch","socket","type","SOCKET","payload","close","token","window","alert","Notification","permission","requestPermission","then"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport io from 'socket.io-client'\r\n\r\nimport PageRender from \"./customRouter/PageRender\";\r\nimport PrivateRouter from \"./customRouter/PrivateRouter\";\r\nimport Login from \"./pages/login\";\r\nimport Register from \"./pages/register\";\r\nimport Home from \"./pages/home\";\r\nimport Alert from \"./components/alert/Alert\";\r\nimport Header from \"./components/header/Header\";\r\nimport StatusModal from \"./components/StatusModal\";\r\nimport { refreshToken } from \"./redux/actions/authAction\";\r\nimport { getPosts } from \"./redux/actions/postAction\";\r\nimport { getSuggestions } from \"./redux/actions/suggestionsAction\";\r\nimport { getNotifies } from \"./redux/actions/notifyAction\";\r\n\r\nimport AdminDashboard from \"./pages/adminDashboard\";\r\nimport { GLOBALTYPES } from \"./redux/actions/globalTypes\";\r\nimport SocketClient from \"./SocketClient\";\r\n\r\nfunction App() {\r\n  const { auth, status, modal, userType } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(refreshToken());\r\n\r\n    const socket = io();\r\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket })\r\n    return () => socket.close()\r\n  }, [dispatch]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (auth.token) {\r\n      dispatch(getPosts(auth.token));\r\n      dispatch(getSuggestions(auth.token));\r\n      dispatch(getNotifies(auth.token));\r\n    }\r\n  }, [dispatch, auth.token]);\r\n\r\n  useEffect(() => {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"This browser does not support desktop notification\");\r\n    } else if (Notification.permission === \"granted\") {\r\n\r\n    } else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then(function (permission) {\r\n        if (permission === \"granted\") {\r\n        }\r\n      });\r\n    }\r\n  }, [])\r\n\r\n   \r\n\r\n  return (\r\n    <Router>\r\n      <Alert />\r\n      <input type=\"checkbox\" id=\"theme\" />\r\n      <div className={`App ${(status || modal) && \"mode\"}`}>\r\n        <div className=\"main\">\r\n          {userType === \"user\" && auth.token && <Header />}\r\n          {status && <StatusModal />}\r\n          {auth.token && <SocketClient /> }\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            component={\r\n              userType === \"user\"\r\n                ? auth.token\r\n                  ? Home\r\n                  : Login\r\n                : auth.token\r\n                ? AdminDashboard\r\n                : Login\r\n            }\r\n          />\r\n\r\n          {userType === \"user\" && (\r\n            <>\r\n              <Route exact path=\"/register\" component={Register} />\r\n              <div className=\"wrap_page\">\r\n                <PrivateRouter exact path=\"/:page\" component={PageRender} />\r\n                <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{follow,unfollow}from\"../redux/actions/profileAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FollowBtn=function FollowBtn(_ref){var user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,profile=_useSelector.profile,socket=_useSelector.socket;var dispatch=useDispatch();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(auth.user.following.find(function(item){return item._id===user._id;})){setFollowed(true);}return function(){return setFollowed(false);};},[auth.user.following,user._id]);var handleFollow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!load){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setFollowed(true);setLoad(true);_context.next=6;return dispatch(follow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleFollow(){return _ref2.apply(this,arguments);};}();var handleUnFollow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!load){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setFollowed(false);setLoad(true);_context2.next=6;return dispatch(unfollow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnFollow(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleUnFollow,children:\"Unfollow\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleFollow,children:\"Follow\"})});};export default FollowBtn;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","follow","unfollow","FollowBtn","user","followed","setFollowed","state","auth","profile","socket","dispatch","load","setLoad","following","find","item","_id","handleFollow","users","handleUnFollow"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/FollowBtn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { follow, unfollow } from \"../redux/actions/profileAction\";\r\n\r\nconst FollowBtn = ({user}) => {\r\n    const [ followed, setFollowed ] = useState(false);\r\n\r\n    const { auth, profile, socket } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (auth.user.following.find((item) => item._id === user._id)) {\r\n        setFollowed(true);\r\n      }\r\n      return () => setFollowed(false);\r\n    }, [auth.user.following, user._id]);\r\n\r\n    const handleFollow = async () => {\r\n        if(load) return;\r\n\r\n        setFollowed(true);\r\n        setLoad(true);\r\n        await dispatch(follow({ users: profile.users, user, auth, socket }));\r\n        setLoad(false);\r\n    };\r\n\r\n    const handleUnFollow = async () => {\r\n      if (load) return;\r\n\r\n      setFollowed(false);\r\n      setLoad(true);\r\n      await dispatch(unfollow({ users: profile.users, user, auth, socket }));\r\n      setLoad(false);\r\n    };\r\n\r\n\r\n    return (\r\n      <>\r\n        {followed ? (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleUnFollow}>\r\n            Unfollow\r\n          </button>\r\n        ) : (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleFollow}>\r\n            Follow\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n}\r\n\r\nexport default FollowBtn\r\n"],"mappings":"ubAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,CAAiBC,QAAjB,KAAiC,gCAAjC,C,gGAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,MAAY,IAAVC,KAAU,MAAVA,IAAU,CAC1B,cAAkCP,QAAQ,CAAC,KAAD,CAA1C,wCAAQQ,QAAR,eAAkBC,WAAlB,eAEA,iBAAkCN,WAAW,CAAC,SAAAO,KAAK,QAAIA,MAAJ,EAAN,CAA7C,CAAQC,IAAR,cAAQA,IAAR,CAAcC,OAAd,cAAcA,OAAd,CAAuBC,MAAvB,cAAuBA,MAAvB,CACA,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CAEA,eAAwBF,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eAEAf,SAAS,CAAC,UAAM,CACd,GAAIU,IAAI,CAACJ,IAAL,CAAUU,SAAV,CAAoBC,IAApB,CAAyB,SAACC,IAAD,QAAUA,KAAI,CAACC,GAAL,GAAab,IAAI,CAACa,GAA5B,EAAzB,CAAJ,CAA+D,CAC7DX,WAAW,CAAC,IAAD,CAAX,CACD,CACD,MAAO,kBAAMA,YAAW,CAAC,KAAD,CAAjB,EAAP,CACD,CALQ,CAKN,CAACE,IAAI,CAACJ,IAAL,CAAUU,SAAX,CAAsBV,IAAI,CAACa,GAA3B,CALM,CAAT,CAOA,GAAMC,aAAY,6FAAG,yIACdN,IADc,iEAGjBN,WAAW,CAAC,IAAD,CAAX,CACAO,OAAO,CAAC,IAAD,CAAP,CAJiB,sBAKXF,SAAQ,CAACV,MAAM,CAAC,CAAEkB,KAAK,CAAEV,OAAO,CAACU,KAAjB,CAAwBf,IAAI,CAAJA,IAAxB,CAA8BI,IAAI,CAAJA,IAA9B,CAAoCE,MAAM,CAANA,MAApC,CAAD,CAAP,CALG,QAMjBG,OAAO,CAAC,KAAD,CAAP,CANiB,sDAAH,kBAAZK,aAAY,2CAAlB,CASA,GAAME,eAAc,6FAAG,8IACjBR,IADiB,mEAGrBN,WAAW,CAAC,KAAD,CAAX,CACAO,OAAO,CAAC,IAAD,CAAP,CAJqB,uBAKfF,SAAQ,CAACT,QAAQ,CAAC,CAAEiB,KAAK,CAAEV,OAAO,CAACU,KAAjB,CAAwBf,IAAI,CAAJA,IAAxB,CAA8BI,IAAI,CAAJA,IAA9B,CAAoCE,MAAM,CAANA,MAApC,CAAD,CAAT,CALO,QAMrBG,OAAO,CAAC,KAAD,CAAP,CANqB,wDAAH,kBAAdO,eAAc,2CAApB,CAUA,mBACE,yBACGf,QAAQ,cACP,eAAQ,SAAS,CAAC,oCAAlB,CAAuD,OAAO,CAAEe,cAAhE,sBADO,cAKP,eAAQ,SAAS,CAAC,oCAAlB,CAAuD,OAAO,CAAEF,YAAhE,oBANJ,EADF,CAaH,CA/CD,CAiDA,cAAef,UAAf"},"metadata":{},"sourceType":"module"}
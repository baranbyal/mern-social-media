{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from'react';import UserCard from\"../UserCard\";import{useDispatch,useSelector}from'react-redux';import{useParams}from'react-router-dom';import MsgDisplay from'./MsgDisplay';import Icons from\"../Icons\";import{GLOBALTYPES}from'../../redux/actions/globalTypes';import{imageShow,videoShow}from'../../utils/mediaShow';import{imageUpload}from'../../utils/imageUpload';import{addMessage,getMessages,MESSAGE_TYPES}from'../../redux/actions/messageAction';import LoadIcon from'../../images/loading.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RightSide=function RightSide(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,message=_useSelector.message,theme=_useSelector.theme,socket=_useSelector.socket;var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useParams=useParams(),id=_useParams.id;var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),media=_useState10[0],setMedia=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loadMedia=_useState12[0],setLoadMedia=_useState12[1];var refDisplay=useRef();var pageEnd=useRef();useEffect(function(){var newData=message.data.filter(function(item){return item.sender===auth.user._id||item.sender===id;});setData(newData);},[message.data,auth.user._id,id]);useEffect(function(){var newUser=message.users.find(function(user){return user._id===id;});if(newUser){setUser(newUser);}},[message.users,id]);var handleChangeMedia=function handleChangeMedia(e){var files=_toConsumableArray(e.target.files);var err=\"\";var newMedia=[];files.forEach(function(file){if(!file){return err=\"File does not exist.\";}if(file.size>1024*1024*5){return err=\"Image size must be less than 5 mb.\";}return newMedia.push(file);});if(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err}});}setMedia([].concat(_toConsumableArray(media),newMedia));};var handleDeleteMedia=function handleDeleteMedia(index){var newArr=_toConsumableArray(media);newArr.splice(index,1);setMedia(newArr);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newArr,msg;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!text.trim()&&media.length===0)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:setText('');setMedia([]);setLoadMedia(true);newArr=[];if(!(media.length>0)){_context.next=11;break;}_context.next=10;return imageUpload(media);case 10:newArr=_context.sent;case 11:msg={sender:auth.user._id,recipient:id,text:text,media:newArr,createdAt:new Date().toISOString()};setLoadMedia(false);_context.next=15;return dispatch(addMessage({msg:msg,auth:auth,socket:socket}));case 15:if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:\"smooth\",block:\"end\"});}case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(id){var getMessagesData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:MESSAGE_TYPES.GET_MESSAGES,payload:{messages:[]}});setPage(1);_context2.next=4;return dispatch(getMessages({auth:auth,id:id}));case 4:if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:'smooth',block:'end'});}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getMessagesData(){return _ref2.apply(this,arguments);};}();getMessagesData();}},[id,dispatch,auth]);// load more\nuseEffect(function(){var observer=new IntersectionObserver(function(entries){if(entries[0].isIntersecting){setPage(function(p){return p+1;});}},{threshold:0.1});observer.observe(pageEnd.current);},[setPage]);useEffect(function(){if(message.resultData>=(page-1)*9&&page>1){dispatch(getMessages({auth:auth,id:id,page:page}));}},[message.resultData,page,id,auth,dispatch]);useEffect(function(){if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:\"smooth\",block:\"end\"});}},[text]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"message_header\",children:user.length!==0&&/*#__PURE__*/_jsx(UserCard,{user:user,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash text-danger\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat_container\",style:{height:media.length>0?\"calc(100% - 180px)\":\"\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat_display\",ref:refDisplay,children:[/*#__PURE__*/_jsx(\"button\",{style:{marginTop:'-25px',opacity:0},ref:pageEnd,children:\"Load..\"}),data.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{children:[msg.sender!==auth.user._id&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row other_message\",children:/*#__PURE__*/_jsx(MsgDisplay,{user:user,msg:msg,theme:theme})}),msg.sender===auth.user._id&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row you_message\",children:/*#__PURE__*/_jsx(MsgDisplay,{user:auth.user,msg:msg,theme:theme})})]},index);}),loadMedia&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row you_message\",children:/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"show_media\",style:{display:media.length>0?\"\":\"none\"},children:media.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{id:\"file_media\",children:[item.type.match(/video/i)?videoShow(URL.createObjectURL(item),theme):imageShow(URL.createObjectURL(item),theme),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleDeleteMedia(index);},children:\"\\xD7\"})]},index);})}),/*#__PURE__*/_jsxs(\"form\",{className:\"chat_input\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Type a message.\",type:\"text\",value:text,onChange:function onChange(e){return setText(e.target.value);},style:{filter:theme?\"invert(1)\":\"invert(0)\",background:theme?'#040404':'',color:theme?'white':''}}),/*#__PURE__*/_jsx(Icons,{setContent:setText,content:text,theme:theme}),/*#__PURE__*/_jsxs(\"div\",{className:\"file_upload\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-image color-c1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",id:\"file\",multiple:true,accept:\"image/*,video/*\",onChange:handleChangeMedia})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:text||media.length>0?false:true,className:\"material-icons\",children:\"near_me\"})]})]});};export default RightSide;","map":{"version":3,"names":["React","useEffect","useState","useRef","UserCard","useDispatch","useSelector","useParams","MsgDisplay","Icons","GLOBALTYPES","imageShow","videoShow","imageUpload","addMessage","getMessages","MESSAGE_TYPES","LoadIcon","RightSide","state","auth","message","theme","socket","dispatch","user","setUser","text","setText","page","setPage","data","setData","id","media","setMedia","loadMedia","setLoadMedia","refDisplay","pageEnd","newData","filter","item","sender","_id","newUser","users","find","handleChangeMedia","e","files","target","err","newMedia","forEach","file","size","push","type","ALERT","payload","error","handleDeleteMedia","index","newArr","splice","handleSubmit","preventDefault","trim","length","msg","recipient","createdAt","Date","toISOString","current","scrollIntoView","behaviour","block","getMessagesData","GET_MESSAGES","messages","observer","IntersectionObserver","entries","isIntersecting","p","threshold","observe","resultData","height","marginTop","opacity","map","display","match","URL","createObjectURL","value","background","color"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/message/RightSide.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport UserCard from \"../UserCard\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport MsgDisplay from './MsgDisplay';\r\nimport Icons from \"../Icons\";\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes';\r\nimport { imageShow, videoShow } from '../../utils/mediaShow';\r\nimport { imageUpload } from '../../utils/imageUpload';\r\nimport { addMessage, getMessages, MESSAGE_TYPES } from '../../redux/actions/messageAction';\r\nimport LoadIcon from '../../images/loading.gif';\r\n\r\nconst RightSide = () => {\r\n    const { auth, message, theme, socket } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n    const [user, setUser] = useState([]);\r\n    const [text, setText] = useState('');\r\n    const [page, setPage] = useState(0);\r\n    const [data, setData] = useState([]);\r\n    const { id } = useParams();\r\n    const [media, setMedia] = useState([]);\r\n    const [loadMedia, setLoadMedia] = useState(false);\r\n\r\n    const refDisplay = useRef();\r\n    const pageEnd = useRef();\r\n\r\n    useEffect(() => {\r\n      const newData = message.data.filter(\r\n        (item) => item.sender === auth.user._id || item.sender === id\r\n      );\r\n      setData(newData);\r\n    }, [message.data, auth.user._id, id]);\r\n\r\n    useEffect(() => {\r\n      const newUser = message.users.find((user) => user._id === id);\r\n      if (newUser) {\r\n        setUser(newUser);\r\n      }\r\n    }, [message.users, id]);\r\n\r\n    const handleChangeMedia = (e) => {\r\n      const files = [...e.target.files];\r\n    let err = \"\";\r\n    let newMedia = [];\r\n\r\n    files.forEach((file) => {\r\n      if (!file) {\r\n        return (err = \"File does not exist.\");\r\n      }\r\n      if (file.size > 1024 * 1024 * 5) {\r\n        return (err = \"Image size must be less than 5 mb.\");\r\n      }\r\n      return newMedia.push(file);\r\n    });\r\n    if (err) {\r\n      dispatch({ type: GLOBALTYPES.ALERT, payload: { error: err } });\r\n    }\r\n    setMedia([...media, ...newMedia]);\r\n    };\r\n\r\n    const handleDeleteMedia = (index) => {\r\n      const newArr = [...media];\r\n      newArr.splice(index, 1);\r\n      setMedia(newArr);\r\n    };\r\n\r\n    const handleSubmit = async e => {\r\n      e.preventDefault();\r\n      if(!text.trim() && media.length === 0) return;\r\n      setText('');\r\n      setMedia([]);\r\n\r\n      setLoadMedia(true);\r\n\r\n      let newArr = [];\r\n      if(media.length > 0) newArr = await imageUpload(media);\r\n\r\n      const msg = {\r\n        sender: auth.user._id,\r\n        recipient: id,\r\n        text,\r\n        media: newArr,\r\n        createdAt: new Date().toISOString()\r\n      }\r\n      setLoadMedia(false);\r\n      await dispatch(addMessage({msg, auth, socket}));\r\n      if (refDisplay.current) {\r\n        refDisplay.current.scrollIntoView({\r\n          behaviour: \"smooth\",\r\n          block: \"end\",\r\n        });\r\n      }\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (id) {\r\n        const getMessagesData = async () => {\r\n\r\n          dispatch({type: MESSAGE_TYPES.GET_MESSAGES, payload: { messages: [] } });\r\n          \r\n          setPage(1);\r\n          await dispatch(getMessages({ auth, id }));\r\n          if(refDisplay.current){\r\n            refDisplay.current.scrollIntoView({behaviour: 'smooth', block: 'end'});\r\n          }\r\n        };\r\n\r\n        getMessagesData();\r\n      }\r\n    }, [id, dispatch, auth]);\r\n\r\n    // load more\r\n\r\n    useEffect(() => {\r\n      const observer = new IntersectionObserver(\r\n        (entries) => {\r\n          if (entries[0].isIntersecting) {\r\n            setPage((p) => p + 1);\r\n          }\r\n        },\r\n        {\r\n          threshold: 0.1,\r\n        }\r\n      );\r\n      observer.observe(pageEnd.current);\r\n    }, [setPage]);\r\n\r\n    useEffect(() => {\r\n      if (message.resultData >= (page - 1) * 9 && page > 1) {\r\n        dispatch(getMessages({ auth, id, page }));\r\n      }\r\n    }, [message.resultData, page, id, auth, dispatch]);\r\n\r\n    useEffect(() => {\r\n      if (refDisplay.current) {\r\n        refDisplay.current.scrollIntoView({\r\n          behaviour: \"smooth\",\r\n          block: \"end\",\r\n        });\r\n      }\r\n    }, [text])\r\n\r\n    return (\r\n      <>\r\n        <div className=\"message_header\">\r\n          {user.length !== 0 && (\r\n            <UserCard user={user}>\r\n              <i className=\"fas fa-trash text-danger\" />\r\n            </UserCard>\r\n          )}\r\n        </div>\r\n\r\n        <div\r\n          className=\"chat_container\"\r\n          style={{ height: media.length > 0 ? \"calc(100% - 180px)\" : \"\" }}\r\n        >\r\n          <div className=\"chat_display\" ref={refDisplay}>\r\n            <button style={{marginTop: '-25px', opacity: 0}} ref={pageEnd}>Load..</button>\r\n\r\n            {data.map((msg, index) => (\r\n              <div key={index}>\r\n                {msg.sender !== auth.user._id && (\r\n                  <div className=\"chat_row other_message\">\r\n                    <MsgDisplay user={user} msg={msg} theme={theme} />\r\n                  </div>\r\n                )}\r\n                {msg.sender === auth.user._id && (\r\n                  <div className=\"chat_row you_message\">\r\n                    <MsgDisplay user={auth.user} msg={msg} theme={theme} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            {loadMedia && (\r\n              <div className=\"chat_row you_message\">\r\n                <img src={LoadIcon} alt=\"Loading...\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className=\"show_media\"\r\n          style={{ display: media.length > 0 ? \"\" : \"none\" }}\r\n        >\r\n          {media.map((item, index) => (\r\n            <div key={index} id=\"file_media\">\r\n              {item.type.match(/video/i)\r\n                ? videoShow(URL.createObjectURL(item), theme)\r\n                : imageShow(URL.createObjectURL(item), theme)}\r\n              <span onClick={() => handleDeleteMedia(index)}>&times;</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <form className=\"chat_input\" onSubmit={handleSubmit}>\r\n          <input\r\n            placeholder=\"Type a message.\"\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={(e) => setText(e.target.value)}\r\n            style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" , background: theme ? '#040404' : '', color: theme ? 'white' : ''}}\r\n          />\r\n          <Icons setContent={setText} content={text} theme={theme} />\r\n          <div className=\"file_upload\">\r\n            <i className=\"fas fa-image color-c1\" />\r\n            <input\r\n              type=\"file\"\r\n              name=\"file\"\r\n              id=\"file\"\r\n              multiple\r\n              accept=\"image/*,video/*\"\r\n              onChange={handleChangeMedia}\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={text || media.length > 0 ? false : true}\r\n            className=\"material-icons\"\r\n          >\r\n            near_me\r\n          </button>\r\n        </form>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default RightSide\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
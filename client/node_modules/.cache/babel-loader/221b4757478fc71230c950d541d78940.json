{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import PostThumb from\"../PostThumb\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Saved=function Saved(_ref){var auth=_ref.auth,dispatch=_ref.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savePosts=_useState2[0],setSavePosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){setLoad(true);getDataAPI(\"getSavePosts\",auth.token).then(function(res){setSavePosts(res.data.savePosts);setResult(res.data.result);setLoad(false);}).catch(function(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});});return function(){return setSavePosts([]);};},[dispatch,auth.token]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"getSavePosts?limit=\".concat(page*9),auth.token);case 3:res=_context.sent;setSavePosts(res.data.savePosts);setResult(res.data.result);setPage(page+1);setLoad(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:savePosts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Saved;","map":{"version":3,"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","GLOBALTYPES","Saved","auth","dispatch","savePosts","setSavePosts","result","setResult","page","setPage","load","setLoad","token","then","res","data","catch","err","type","ALERT","payload","error","response","msg","handleLoadMore"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/profile/Saved.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PostThumb from \"../PostThumb\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\nimport LoadMoreBtn from \"../LoadMoreBtn\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\n\r\nconst Saved = ({ auth, dispatch }) => {\r\n  const [savePosts, setSavePosts] = useState([]);\r\n  const [result, setResult] = useState(9);\r\n  const [page, setPage] = useState(2);\r\n  const [load, setLoad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoad(true);\r\n    getDataAPI(`getSavePosts`, auth.token)\r\n    .then(res => { \r\n        setSavePosts(res.data.savePosts) \r\n        setResult(res.data.result)\r\n        setLoad(false)\r\n    })  \r\n    .catch(err => {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    })\r\n\r\n    return () => setSavePosts([]);\r\n  }, [dispatch, auth.token]);\r\n\r\n  const handleLoadMore = async () => {\r\n    setLoad(true);\r\n    const res = await getDataAPI(`getSavePosts?limit=${page * 9}`, auth.token);\r\n    setSavePosts(res.data.savePosts);\r\n    setResult(res.data.result);\r\n    setPage(page + 1);\r\n    setLoad(false);\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <PostThumb posts={savePosts} result={result} />\r\n\r\n      {load && (\r\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\r\n      )}\r\n\r\n      <LoadMoreBtn\r\n        result={result}\r\n        page={page}\r\n        load={load}\r\n        handleLoadMore={handleLoadMore}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Saved;\r\n"],"mappings":"ubAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,UAAP,KAAsB,cAAtB,CACA,MAAOC,SAAP,KAAqB,0BAArB,CACA,MAAOC,YAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,WAAT,KAA4B,iCAA5B,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAAwB,IAArBC,KAAqB,MAArBA,IAAqB,CAAfC,QAAe,MAAfA,QAAe,CACpC,cAAkCT,QAAQ,CAAC,EAAD,CAA1C,wCAAOU,SAAP,eAAkBC,YAAlB,eACA,eAA4BX,QAAQ,CAAC,CAAD,CAApC,yCAAOY,MAAP,eAAeC,SAAf,eACA,eAAwBb,QAAQ,CAAC,CAAD,CAAhC,yCAAOc,IAAP,eAAaC,OAAb,eACA,eAAwBf,QAAQ,CAAC,KAAD,CAAhC,yCAAOgB,IAAP,eAAaC,OAAb,eAEAhB,SAAS,CAAC,UAAM,CACdgB,OAAO,CAAC,IAAD,CAAP,CACAZ,UAAU,gBAAiBG,IAAI,CAACU,KAAtB,CAAV,CACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACTT,YAAY,CAACS,GAAG,CAACC,IAAJ,CAASX,SAAV,CAAZ,CACAG,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACAK,OAAO,CAAC,KAAD,CAAP,CACH,CALD,EAMCK,KAND,CAMO,SAAAC,GAAG,CAAI,CACVd,QAAQ,CAAC,CAACe,IAAI,CAAElB,WAAW,CAACmB,KAAnB,CAA0BC,OAAO,CAAE,CAACC,KAAK,CAAEJ,GAAG,CAACK,QAAJ,CAAaP,IAAb,CAAkBQ,GAA1B,CAAnC,CAAD,CAAR,CACH,CARD,EAUA,MAAO,kBAAMlB,aAAY,CAAC,EAAD,CAAlB,EAAP,CACD,CAbQ,CAaN,CAACF,QAAD,CAAWD,IAAI,CAACU,KAAhB,CAbM,CAAT,CAeA,GAAMY,eAAc,6FAAG,6IACrBb,OAAO,CAAC,IAAD,CAAP,CADqB,sBAEHZ,WAAU,8BAAuBS,IAAI,CAAG,CAA9B,EAAmCN,IAAI,CAACU,KAAxC,CAFP,QAEfE,GAFe,eAGrBT,YAAY,CAACS,GAAG,CAACC,IAAJ,CAASX,SAAV,CAAZ,CACAG,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACAG,OAAO,CAACD,IAAI,CAAG,CAAR,CAAP,CACAG,OAAO,CAAC,KAAD,CAAP,CANqB,sDAAH,kBAAda,eAAc,2CAApB,CAUA,mBACE,oCACE,KAAC,SAAD,EAAW,KAAK,CAAEpB,SAAlB,CAA6B,MAAM,CAAEE,MAArC,EADF,CAGGI,IAAI,eACH,YAAK,GAAG,CAAEb,QAAV,CAAoB,GAAG,CAAC,YAAxB,CAAqC,SAAS,CAAC,iBAA/C,EAJJ,cAOE,KAAC,WAAD,EACE,MAAM,CAAES,MADV,CAEE,IAAI,CAAEE,IAFR,CAGE,IAAI,CAAEE,IAHR,CAIE,cAAc,CAAEc,cAJlB,EAPF,GADF,CAgBD,CA/CD,CAiDA,cAAevB,MAAf"},"metadata":{},"sourceType":"module"}
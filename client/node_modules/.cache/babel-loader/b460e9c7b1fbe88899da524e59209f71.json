{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";// import { Link } from \"react-router-dom\";\nimport UserCard from\"../UserCard\";import LoadIcon from\"../../images/loading.gif\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(search){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;setLoad(true);_context.next=7;return getDataAPI(\"search?username=\".concat(search),auth.token);case 7:res=_context.sent;setUsers(res.data.users);setLoad(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){setSearch(\"\");setUsers([]);};return/*#__PURE__*/_jsxs(\"form\",{className:\"search_form\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",title:\"Enter to Search\",name:\"search\",value:search,id:\"search\",onChange:function onChange(e){return setSearch(e.target.value.toLowerCase().replace(/ /g,\" \"));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_icon\",style:{opacity:search?0:0.3},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Enter to Search\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:handleClose,className:\"close_search\",style:{opacity:users.length===0?0:1},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:\"none\"},children:\"Search\"}),load&&/*#__PURE__*/_jsx(\"img\",{className:\"loading\",src:LoadIcon,alt:\"Loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:search&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,border:\"border\",handleClose:handleClose},user._id);})})]});};export default Search;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","getDataAPI","GLOBALTYPES","UserCard","LoadIcon","Search","search","setSearch","users","setUsers","state","auth","dispatch","load","setLoad","handleSearch","e","preventDefault","token","res","data","type","ALERT","payload","error","response","msg","handleClose","target","value","toLowerCase","replace","opacity","length","display","map","user","_id"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/header/Search.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\n// import { Link } from \"react-router-dom\";\r\nimport UserCard from \"../UserCard\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\n\r\nconst Search = () => {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const { auth } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [load, setLoad] = useState(false);\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!search) return;\r\n\r\n    try {\r\n      setLoad(true);\r\n      const res = await getDataAPI(`search?username=${search}`, auth.token);\r\n      setUsers(res.data.users);\r\n      setLoad(false);\r\n    } catch (err) {\r\n      dispatch({\r\n        type: GLOBALTYPES.ALERT,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSearch(\"\");\r\n    setUsers([]);\r\n  };\r\n\r\n  return (\r\n    <form className=\"search_form\" onSubmit={handleSearch}>\r\n      <input\r\n        type=\"text\"\r\n        title=\"Enter to Search\"\r\n        name=\"search\"\r\n        value={search}\r\n        id=\"search\"\r\n        onChange={(e) =>\r\n          setSearch(e.target.value.toLowerCase().replace(/ /g, \" \"))\r\n        }\r\n      />\r\n      <div className=\"search_icon\" style={{ opacity: search ? 0 : 0.3 }}>\r\n        <span className=\"material-icons\">search</span>\r\n        <span>Enter to Search</span>\r\n      </div>\r\n\r\n      <div\r\n        onClick={handleClose}\r\n        className=\"close_search\"\r\n        style={{ opacity: users.length === 0 ? 0 : 1 }}\r\n      >\r\n        &times;\r\n      </div>\r\n\r\n      <button type=\"submit\" style={{ display: \"none\" }}>\r\n        Search\r\n      </button>\r\n\r\n      {load && <img className=\"loading\" src={LoadIcon} alt=\"Loading\" />}\r\n\r\n      <div className=\"users\">\r\n        {search &&\r\n          users.map((user) => (\r\n            <UserCard\r\n              key={user._id}\r\n              user={user}\r\n              border=\"border\"\r\n              handleClose={handleClose}\r\n            />\r\n          ))}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
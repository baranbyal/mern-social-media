{"ast":null,"code":"import _toConsumableArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{GLOBALTYPES}from\"./globalTypes\";import{postDataAPI,getDataAPI,patchDataAPI,deleteDataAPI}from\"../../utils/fetchData\";import{imageUpload}from\"../../utils/imageUpload\";import{createNotify,removeNotify}from\"./notifyAction\";export var POST_TYPES={CREATE_POST:\"CREATE_POST\",LOADING_POST:\"LOADING_POST\",GET_POSTS:\"GET_POSTS\",UPDATE_POST:\"UPDATE_POST\",GET_POST:\"GET_POST\",DELETE_POST:\"DELETE_POST\",REPORT_POST:\"REPORT_POST\",SAVE_POST:\"SAVE_POST\"};export var createPost=function createPost(_ref){var content=_ref.content,images=_ref.images,auth=_ref.auth,socket=_ref.socket;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var media,res,msg;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:media=[];_context.prev=1;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});if(!(images.length>0)){_context.next=7;break;}_context.next=6;return imageUpload(images);case 6:media=_context.sent;case 7:_context.next=9;return postDataAPI('posts',{content:content,images:media},auth.token);case 9:res=_context.sent;dispatch({type:POST_TYPES.CREATE_POST,payload:_objectSpread(_objectSpread({},res.data.newPost),{},{user:auth.user})});dispatch({type:GLOBALTYPES.ALERT,payload:{loading:false}});// todo notification\nmsg={id:res.data.newPost._id,text:\"Added a new post.\",recipients:res.data.newPost.user.followers,url:\"/post/\".concat(res.data.newPost._id),content:content,image:media[0].url};dispatch(createNotify({msg:msg,auth:auth,socket:socket}));_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var getPosts=function getPosts(token){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:POST_TYPES.LOADING_POST,payload:true});_context2.next=4;return getDataAPI('posts',token);case 4:res=_context2.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:2})});dispatch({type:POST_TYPES.LOADING_POST,payload:false});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var updatePost=function updatePost(_ref4){var content=_ref4.content,images=_ref4.images,auth=_ref4.auth,status=_ref4.status;return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var media,imgNewUrl,imgOldUrl,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:media=[];imgNewUrl=images.filter(function(img){return!img.url;});imgOldUrl=images.filter(function(img){return img.url;});if(!(status.content===content&&imgNewUrl.length===0&&imgOldUrl.length===status.images.length)){_context3.next=5;break;}return _context3.abrupt(\"return\");case 5:_context3.prev=5;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});if(!(imgNewUrl.length>0)){_context3.next=11;break;}_context3.next=10;return imageUpload(imgNewUrl);case 10:media=_context3.sent;case 11:_context3.next=13;return patchDataAPI(\"post/\".concat(status._id),{content:content,images:[].concat(_toConsumableArray(imgOldUrl),_toConsumableArray(media))},auth.token);case 13:res=_context3.sent;dispatch({type:POST_TYPES.UPDATE_POST,payload:res.data.newPost});dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});_context3.next=21;break;case 18:_context3.prev=18;_context3.t0=_context3[\"catch\"](5);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 21:case\"end\":return _context3.stop();}}},_callee3,null,[[5,18]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var likePost=function likePost(_ref6){var post=_ref6.post,auth=_ref6.auth,socket=_ref6.socket;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var newPost,msg;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newPost=_objectSpread(_objectSpread({},post),{},{likes:[].concat(_toConsumableArray(post.likes),[auth.user])});dispatch({type:POST_TYPES.UPDATE_POST,payload:newPost});socket.emit(\"likePost\",newPost);_context4.prev=3;_context4.next=6;return patchDataAPI(\"post/\".concat(post._id,\"/like\"),null,auth.token);case 6:// todo notification\nmsg={id:auth.user._id,text:\"Liked your post.\",recipients:[post.user._id],url:\"/post/\".concat(post._id),content:post.content,image:post.images[0].url};dispatch(createNotify({msg:msg,auth:auth,socket:socket}));_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));return function(_x4){return _ref7.apply(this,arguments);};}();};export var unLikePost=function unLikePost(_ref8){var post=_ref8.post,auth=_ref8.auth,socket=_ref8.socket;return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){var newPost,msg;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newPost=_objectSpread(_objectSpread({},post),{},{likes:post.likes.filter(function(like){return like._id!==auth.user._id;})});dispatch({type:POST_TYPES.UPDATE_POST,payload:newPost});socket.emit(\"unLikePost\",newPost);_context5.prev=3;_context5.next=6;return patchDataAPI(\"post/\".concat(post._id,\"/unlike\"),null,auth.token);case 6:// todo notification\nmsg={id:auth.user._id,text:\"Liked your post.\",recipients:[post.user._id],url:\"/post/\".concat(post._id)};dispatch(removeNotify({msg:msg,auth:auth,socket:socket}));_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context5.t0.response.data.msg}});case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[3,10]]);}));return function(_x5){return _ref9.apply(this,arguments);};}();};export var getPost=function getPost(_ref10){var detailPost=_ref10.detailPost,id=_ref10.id,auth=_ref10.auth;return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(dispatch){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!detailPost.every(function(post){return post._id!==id;})){_context6.next=11;break;}_context6.prev=1;_context6.next=4;return getDataAPI(\"post/\".concat(id),auth.token);case 4:res=_context6.sent;dispatch({type:POST_TYPES.GET_POST,payload:res.data.post});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context6.t0.response.data.msg}});case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[1,8]]);}));return function(_x6){return _ref11.apply(this,arguments);};}();};export var deletePost=function deletePost(_ref12){var post=_ref12.post,auth=_ref12.auth,socket=_ref12.socket;return/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(dispatch){var res,msg;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:POST_TYPES.DELETE_POST,payload:post});_context7.prev=1;_context7.next=4;return deleteDataAPI(\"post/\".concat(post._id),auth.token);case 4:res=_context7.sent;// todo notification\nmsg={id:post._id,text:\"Added a new post.\",recipients:res.data.newPost.user.followers,url:\"/post/\".concat(post._id)};dispatch(removeNotify({msg:msg,auth:auth,socket:socket}));_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context7.t0.response.data.msg}});case 12:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x7){return _ref13.apply(this,arguments);};}();};export var reportPost=function reportPost(_ref14){var post=_ref14.post,auth=_ref14.auth;return/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(dispatch){var reportExist,newPost,res;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:reportExist=post.reports.find(function(report){return report===auth.user._id;});if(!(reportExist&&reportExist.length>0)){_context8.next=3;break;}return _context8.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"You have already reported this post.\"}}));case 3:newPost=_objectSpread({},post);newPost.reports.push(auth.user._id);dispatch({type:POST_TYPES.REPORT_POST,payload:newPost});_context8.prev=6;_context8.next=9;return patchDataAPI(\"post/\".concat(post._id,\"/report\"),null,auth.token);case 9:res=_context8.sent;dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});_context8.next=16;break;case 13:_context8.prev=13;_context8.t0=_context8[\"catch\"](6);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context8.t0.response.data.msg}});case 16:case\"end\":return _context8.stop();}}},_callee8,null,[[6,13]]);}));return function(_x8){return _ref15.apply(this,arguments);};}();};export var savePost=function savePost(_ref16){var post=_ref16.post,auth=_ref16.auth;return/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(dispatch){var newUser;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:newUser=_objectSpread(_objectSpread({},auth.user),{},{saved:[].concat(_toConsumableArray(auth.user.saved),[post._id])});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:newUser})});_context9.prev=2;_context9.next=5;return patchDataAPI(\"savePost/\".concat(post._id),null,auth.token);case 5:_context9.next=10;break;case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](2);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context9.t0.response.data.msg}});case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[2,7]]);}));return function(_x9){return _ref17.apply(this,arguments);};}();};export var unSavePost=function unSavePost(_ref18){var post=_ref18.post,auth=_ref18.auth;return/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(dispatch){var newUser;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:newUser=_objectSpread(_objectSpread({},auth.user),{},{saved:auth.user.saved.filter(function(id){return id!==post._id;})});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:newUser})});_context10.prev=2;_context10.next=5;return patchDataAPI(\"unSavePost/\".concat(post._id),null,auth.token);case 5:_context10.next=10;break;case 7:_context10.prev=7;_context10.t0=_context10[\"catch\"](2);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context10.t0.response.data.msg}});case 10:case\"end\":return _context10.stop();}}},_callee10,null,[[2,7]]);}));return function(_x10){return _ref19.apply(this,arguments);};}();};","map":{"version":3,"names":["GLOBALTYPES","postDataAPI","getDataAPI","patchDataAPI","deleteDataAPI","imageUpload","createNotify","removeNotify","POST_TYPES","CREATE_POST","LOADING_POST","GET_POSTS","UPDATE_POST","GET_POST","DELETE_POST","REPORT_POST","SAVE_POST","createPost","content","images","auth","socket","dispatch","media","type","ALERT","payload","loading","length","token","res","data","newPost","user","msg","id","_id","text","recipients","followers","url","image","error","response","getPosts","page","updatePost","status","imgNewUrl","filter","img","imgOldUrl","success","likePost","post","likes","emit","unLikePost","like","getPost","detailPost","every","deletePost","reportPost","reportExist","reports","find","report","push","savePost","newUser","saved","AUTH","unSavePost"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/redux/actions/postAction.js"],"sourcesContent":["import { GLOBALTYPES } from \"./globalTypes\";\r\nimport { postDataAPI, getDataAPI, patchDataAPI, deleteDataAPI } from \"../../utils/fetchData\";\r\nimport { imageUpload } from \"../../utils/imageUpload\";\r\nimport { createNotify, removeNotify } from \"./notifyAction\";\r\n\r\n\r\nexport const POST_TYPES = {\r\n  CREATE_POST: \"CREATE_POST\",\r\n  LOADING_POST: \"LOADING_POST\",\r\n  GET_POSTS: \"GET_POSTS\",\r\n  UPDATE_POST: \"UPDATE_POST\",\r\n  GET_POST: \"GET_POST\",\r\n  DELETE_POST: \"DELETE_POST\",\r\n  REPORT_POST: \"REPORT_POST\",\r\n  SAVE_POST: \"SAVE_POST\",\r\n};\r\n\r\nexport const createPost = ({content, images, auth, socket}) => async dispatch => {\r\n    let media = [];\r\n\r\n    try {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: true} });\r\n\r\n        if(images.length > 0){ media = await imageUpload(images)}\r\n\r\n        const res = await postDataAPI('posts', {content, images: media}, auth.token );\r\n\r\n        \r\n        dispatch({ type: POST_TYPES.CREATE_POST , payload: {...res.data.newPost, user: auth.user} });\r\n        \r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: { loading: false } });\r\n        \r\n\r\n        // todo notification\r\n        const msg = {\r\n          id: res.data.newPost._id,\r\n          text: \"Added a new post.\",\r\n          recipients: res.data.newPost.user.followers,\r\n          url: `/post/${res.data.newPost._id}`,\r\n          content, \r\n          image: media[0].url\r\n        };\r\n\r\n        dispatch(createNotify({msg, auth, socket}));\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {\r\n                error: err.response.data.msg\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const getPosts = (token) => async dispatch => {\r\n    try {\r\n        dispatch({ type: POST_TYPES.LOADING_POST, payload: true  });\r\n        const res = await getDataAPI('posts', token);\r\n        dispatch({ type: POST_TYPES.GET_POSTS, payload: {...res.data, page: 2} });\r\n\r\n        dispatch({ type: POST_TYPES.LOADING_POST, payload: false });\r\n    } catch (err) {\r\n        dispatch({\r\n          type: GLOBALTYPES.ALERT,\r\n          payload: {\r\n            error: err.response.data.msg,\r\n          },\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport const updatePost = ({ content, images, auth, status }) => async (dispatch) => {\r\n  let media = [];\r\n    const imgNewUrl = images.filter(img => !img.url);\r\n    const imgOldUrl = images.filter(img => img.url);\r\n    if(status.content === content && imgNewUrl.length === 0 && imgOldUrl.length === status.images.length){\r\n        return;\r\n    }\r\n  try {\r\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { loading: true } });\r\n    if (imgNewUrl.length > 0) {\r\n      media = await imageUpload(imgNewUrl);\r\n    }\r\n    const res = await patchDataAPI(\r\n      `post/${status._id}`,\r\n      { content, images: [...imgOldUrl, ...media] },\r\n      auth.token\r\n    );\r\n    \r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: res.data.newPost });\r\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { success: res.data.msg } });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const likePost = ({ post, auth, socket }) => async (dispatch) => {\r\n  const newPost = {...post, likes: [...post.likes, auth.user]};\r\n\r\n  dispatch({type: POST_TYPES.UPDATE_POST, payload: newPost});\r\n  socket.emit(\"likePost\", newPost);\r\n  \r\n  try {\r\n    await patchDataAPI(`post/${post._id}/like`, null, auth.token);\r\n\r\n    // todo notification\r\n    const msg = {\r\n      id: auth.user._id,\r\n      text: \"Liked your post.\",\r\n      recipients: [post.user._id],\r\n      url: `/post/${post._id}`,\r\n      content: post.content,\r\n      image: post.images[0].url,\r\n    };\r\n\r\n    dispatch(createNotify({ msg, auth, socket }));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const unLikePost = ({ post, auth, socket }) => async (dispatch) => {\r\n  const newPost = { ...post, likes: post.likes.filter(like => like._id !== auth.user._id) };\r\n\r\n  dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost });\r\n  socket.emit(\"unLikePost\", newPost);\r\n\r\n  \r\n  try {\r\n    await patchDataAPI(`post/${post._id}/unlike`, null, auth.token);\r\n\r\n    // todo notification\r\n    const msg = {\r\n      id: auth.user._id,\r\n      text: \"Liked your post.\",\r\n      recipients: [post.user._id],\r\n      url: `/post/${post._id}`, \r\n    };\r\n\r\n    dispatch(removeNotify({ msg, auth, socket }));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const getPost = ({ detailPost, id, auth }) => async (dispatch) => {\r\n  if(detailPost.every(post => post._id !== id )){\r\n    try {\r\n      const res = await getDataAPI(`post/${id}`, auth.token);\r\n      dispatch({ type: POST_TYPES.GET_POST, payload: res.data.post})\r\n\r\n\r\n    } catch (err) {\r\n      dispatch({\r\n        type: GLOBALTYPES.ALERT,\r\n        payload: {\r\n          error: err.response.data.msg,\r\n        },\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport const deletePost = ({ post, auth, socket }) => async (dispatch) => {\r\n  dispatch({ type: POST_TYPES.DELETE_POST, payload: post });\r\n\r\n  try {\r\n    const res = await deleteDataAPI(`post/${post._id}`, auth.token);\r\n\r\n    // todo notification\r\n    const msg = {\r\n      id: post._id,\r\n      text: \"Added a new post.\",\r\n      recipients: res.data.newPost.user.followers,\r\n      url: `/post/${post._id}`,\r\n    };\r\n\r\n    dispatch(removeNotify({ msg, auth, socket }));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const reportPost = ({ post, auth }) => async (dispatch) => {\r\n\r\n  const reportExist = post.reports.find(report => report === auth.user._id);\r\n\r\n  if (reportExist && reportExist.length > 0) {\r\n    return dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: \"You have already reported this post.\" },\r\n    });\r\n  }\r\n    const newPost = { ...post };\r\n    newPost.reports.push(auth.user._id);\r\n\r\n  dispatch({ type: POST_TYPES.REPORT_POST, payload: newPost });\r\n  \r\n\r\ntry {\r\n  const res = await patchDataAPI(`post/${post._id}/report`, null, auth.token);\r\n  dispatch({ type: GLOBALTYPES.ALERT, payload: { success: res.data.msg } });\r\n} catch (err) {\r\n  dispatch({\r\n    type: GLOBALTYPES.ALERT,\r\n    payload: {\r\n      error: err.response.data.msg,\r\n    },\r\n  });\r\n}\r\n};\r\n\r\nexport const savePost = ({ post, auth }) => async (dispatch) => {\r\n  const newUser = {...auth.user, saved: [...auth.user.saved, post._id] };\r\n\r\n  dispatch({ type: GLOBALTYPES.AUTH, payload: {...auth, user: newUser}});\r\n\r\n\r\n  try {\r\n    await patchDataAPI(`savePost/${post._id}`, null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const unSavePost = ({ post, auth }) => async (dispatch) => {\r\n  const newUser = { ...auth.user, saved: auth.user.saved.filter(id => id !== post._id) };\r\n\r\n  dispatch({ type: GLOBALTYPES.AUTH, payload: { ...auth, user: newUser } });\r\n\r\n  try {\r\n    await patchDataAPI(`unSavePost/${post._id}`, null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
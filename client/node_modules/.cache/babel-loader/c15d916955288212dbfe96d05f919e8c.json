{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/baran/Documents/baris/mern-social-media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import LikeButton from'../../LikeButton';import{useSelector,useDispatch}from\"react-redux\";import{likePost,savePost,unLikePost,unSavePost}from\"../../../redux/actions/postAction\";import ShareModal from'../../ShareModal';// import { BASE_URL } from '../../../utils/config';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardFooter=function CardFooter(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),saved=_useState4[0],setSaved=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadLike=_useState6[0],setLoadLike=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saveLoad=_useState8[0],setSaveLoad=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isShare=_useState10[0],setIsShare=_useState10[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme,socket=_useSelector.socket;useEffect(function(){if(post.likes.find(function(like){return like._id===auth.user._id;})){setIsLike(true);}else{setIsLike(false);}},[post.likes,auth.user._id]);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loadLike){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoadLike(true);_context.next=5;return dispatch(likePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loadLike){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadLike(true);_context2.next=5;return dispatch(unLikePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnLike(){return _ref3.apply(this,arguments);};}();var handleSavePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!saveLoad){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSaveLoad(true);_context3.next=5;return dispatch(savePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSavePost(){return _ref4.apply(this,arguments);};}();var handleUnSavePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!saveLoad){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:setSaveLoad(true);_context4.next=5;return dispatch(unSavePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUnSavePost(){return _ref5.apply(this,arguments);};}();useEffect(function(){if(auth.user.saved.find(function(id){return id===post._id;})){setSaved(true);}else{setSaved(false);}},[post._id,auth.user.saved]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card_footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_icon_menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(LikeButton,{isLike:isLike,handleLike:handleLike,handleUnLike:handleUnLike}),/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post._id),className:\"text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-comments\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-share\",alt:\"Send\",onClick:function onClick(){return setIsShare(!isShare);}})]}),saved?/*#__PURE__*/_jsx(\"i\",{className:\"fas text-info fa-bookmark\",onClick:handleUnSavePost}):/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\",onClick:handleSavePost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start\",children:[/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.likes.length,\" likes\"]}),/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.comments.length,\" comments\"]})]}),isShare&&/*#__PURE__*/_jsx(ShareModal// url={`${BASE_URL}/post/${post._id}`}\n,{url:\"http://google.com\",theme:theme,setIsShare:setIsShare})]});};export default CardFooter;","map":{"version":3,"names":["React","useState","useEffect","Link","LikeButton","useSelector","useDispatch","likePost","savePost","unLikePost","unSavePost","ShareModal","CardFooter","post","isLike","setIsLike","saved","setSaved","loadLike","setLoadLike","saveLoad","setSaveLoad","isShare","setIsShare","dispatch","state","auth","theme","socket","likes","find","like","_id","user","handleLike","handleUnLike","handleSavePost","handleUnSavePost","id","padding","cursor","length","comments"],"sources":["C:/Users/baran/Documents/baris/mern-social-media/client/src/components/home/post_card/CardFooter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport LikeButton from '../../LikeButton';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { likePost, savePost, unLikePost, unSavePost } from \"../../../redux/actions/postAction\";\r\nimport ShareModal from '../../ShareModal';\r\n// import { BASE_URL } from '../../../utils/config';\r\n\r\n\r\nconst CardFooter = ({post}) => {\r\n  const [isLike, setIsLike] = useState(false);\r\n  const [saved, setSaved] = useState(false);\r\n  const [loadLike, setLoadLike] = useState(false);\r\n  const [saveLoad, setSaveLoad] = useState(false);\r\n  const [isShare, setIsShare] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const { auth, theme, socket } = useSelector((state) => state);\r\n\r\n  useEffect(() => {\r\n    if (post.likes.find((like) => like._id === auth.user._id)) {\r\n      setIsLike(true);\r\n    }else{\r\n      setIsLike(false);\r\n    }\r\n  }, [post.likes, auth.user._id]);\r\n\r\n  const handleLike = async () => {\r\n    if(loadLike) return;\r\n    setLoadLike(true);\r\n    await dispatch( likePost({post, auth, socket}) );\r\n    setLoadLike(false);\r\n  };\r\n\r\n  const handleUnLike = async () => {\r\n    if(loadLike) return;\r\n    setLoadLike(true);\r\n    await dispatch( unLikePost({post, auth, socket}) );\r\n    setLoadLike(false);\r\n  };\r\n\r\n    const handleSavePost = async () => {\r\n      if (saveLoad) return;\r\n      setSaveLoad(true);\r\n      await dispatch(savePost({ post, auth }));\r\n      setSaveLoad(false);\r\n    };\r\n\r\n    const handleUnSavePost = async () => {\r\n      if (saveLoad) return;\r\n      setSaveLoad(true);\r\n      await dispatch(unSavePost({ post, auth }));\r\n      setSaveLoad(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (auth.user.saved.find(id => id === post._id)) {\r\n        setSaved(true);\r\n      } else {\r\n        setSaved(false);\r\n      }\r\n    }, [post._id, auth.user.saved]);\r\n\r\n    return (\r\n      <div className=\"card_footer\">\r\n        <div className=\"card_icon_menu\">\r\n          <div className=\"d-flex\">\r\n            <LikeButton\r\n              isLike={isLike}\r\n              handleLike={handleLike}\r\n              handleUnLike={handleUnLike}\r\n            />\r\n            <Link to={`/post/${post._id}`} className=\"text-dark\">\r\n              <i className=\"far fa-comments\" />\r\n            </Link>\r\n            <i\r\n              className=\"fa fa-share\"\r\n              alt=\"Send\"\r\n              onClick={() => setIsShare(!isShare)}\r\n            />\r\n          </div>\r\n          {saved ? (\r\n            <i\r\n              className=\"fas text-info fa-bookmark\"\r\n              onClick={handleUnSavePost}\r\n            />\r\n          ) : (\r\n            <i\r\n              className=\"far fa-bookmark\"\r\n              onClick={handleSavePost}\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"d-flex justify-content-start\">\r\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\r\n            {post.likes.length} likes\r\n          </h6>\r\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\r\n            {post.comments.length} comments\r\n          </h6>\r\n        </div>\r\n\r\n        {isShare && (\r\n          <ShareModal\r\n            // url={`${BASE_URL}/post/${post._id}`}\r\n            url=\"http://google.com\"\r\n            theme={theme}\r\n            setIsShare={setIsShare}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default CardFooter\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}